<div class="flex justify-center">
  <!-- Pick Server Sidebar -->
  <div class="w-[74px] bg-gray-900/95 dark:bg-gray-900/25 h-screen flex-shrink-0 flex flex-col items-center gap-2
              overflow-hidden pb-2 duration-500 ease-in-out transition-all transform"
       id="discord-server-picker"
       [style.width.px]="this.dataService.showSidebarLogo ? '0' : ''">
    <a routerLink="/" class="w-12 h-12 flex items-center justify-center mb-2 transition-all duration-300 ease-in-out
                             transform hover:scale-105 mt-3 flex-shrink-0">
      <img class="w-12 h-12 rounded-full" height="50" width="50" ngSrc="assets/img/logo/clank-discord-bot-logo-50x50.png"
           alt="Clank ~ Discord-Bot (Discord Sidebar-Logo) " />
    </a>

    <div class="w-8 h-0.5 bg-gray-700 rounded-full mb-2"></div>

    <div class="flex flex-col items-center gap-2 overflow-y-auto scrollbar-hide">
      <!-- TODO: Replace with real guilds -->
      @for (server of servers; track server.id) {
        <div class="group relative">
          <div class="absolute -left-3 w-2 h-2 bg-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity"></div>
          <div class="w-12 h-12 bg-transparent rounded-3xl group-hover:rounded-xl transition-all duration-200 cursor-pointer
                      overflow-hidden group-hover:scale-105" [title]="server.name">
            <img [ngSrc]="server.image" [alt]="server.name" class="w-full h-full object-cover" width="48" height="48" />
          </div>
        </div>
      }
    </div>
  </div>


  <!-- Dashboard Navigation Sidebar -->
  <aside class="w-72 bg-gray-900 shadow-lg flex flex-col h-screen">

    <!-- Header of Sidebar -->
    <div class="p-4 flex items-center justify-between pb-1"
         style="padding-right: 1rem !important; padding-top: 0.75rem !important;">

      <a routerLink="/">
        <img alt="Clank ~ Discord-Bot (Logo)" class="w-10 h-10" height="50"
             [@slideAnimation]="this.dataService.showSidebarLogo ? 'visible' : 'hidden'"
             ngSrc="assets/img/logo/clank-discord-bot-logo-50x50.png" width="50"/>
      </a>

      <div class="flex gap-x-1">
        <a href="/contact#bot-idea">
          <div class="w-8 h-8 hover:rounded-full flex hover:bg-gray-500 items-center justify-center">
            <img alt="Clank ~ Discord-Bot (Suggest Idea Icon)" class="w-5 h-5 rounded-none"
                 height="24" ngSrc="assets/img/icons/sidebar/lightbulb-on.svg" width="24"/>
          </div>
        </a>
        <a href="https://discord.gg/bl4cklist" target="_blank">
          <div class="w-8 h-8 hover:rounded-full flex hover:bg-gray-500 items-center justify-center">
            <img alt="Clank ~ Discord-Bot (Discord Icon)" class="w-5 h-5 rounded-none"
                 height="24" ngSrc="assets/img/icons/sidebar/discord.svg" width="24"/>
          </div>
        </a>
        <a (click)="this.authService.logout()" class="cursor-pointer">
          <div class="w-8 h-8 hover:rounded-full flex hover:bg-gray-500 items-center justify-center">
            <img alt="Clank ~ Discord-Bot (Logout Icon)" class="w-5 h-5 rounded-none"
                 height="24" ngSrc="assets/img/icons/sidebar/sign-out-alt.svg" width="24"/>
          </div>
        </a>
      </div>
    </div>

    <!-- TODO: Change Server name, icon & details -->
    <div class="p-6 pt-3 flex items-center border-b border-gray-700 pb-4 pr-2">
      <div class="w-12 h-12 rounded-full bg-gray-200 overflow-hidden">
        <img alt="Clank ~ Discord-Bot (Server Avatar)" class="w-full h-full object-cover"
             height="80" ngSrc="assets/img/80.png" priority width="80"/>
      </div>
      <div class="flex flex-col justify-center items-center ml-2 w-48">
        <p
          class="text-white text-sm mb-0 font-extrabold whitespace-nowrap overflow-hidden text-ellipsis text-center w-full">
          BL4CKLIST - CODING
        </p>
        <p class="text-xs text-slate-400 mb-0">
          3674 Mitglieder (512 online)
        </p>
      </div>
    </div>

    <!-- Navigation -->
    <nav class="p-4 pl-0 overflow-y-auto min-h-0 pb-0">
      @for (group of navigation; track $index) {
        <div [ngClass]="$index != navigation.length - 1 ? 'mb-2 pb-3' : ''">
          <div class="flex flex-col">
            <div class="flex items-center justify-between pl-2 pr-0 cursor-pointer gap-2 w-[104%]"
                 (click)="toggleGroup(group.category)">
              <div>
                <h3
                  class="px-0 mb-0 select-none text-xs font-semibold text-gray-500 uppercase tracking-wider
                         text-{{group.color}}-gradient">{{ group.category | translate }}</h3>
                <p class="text-xs text-gray-500 mb-0 select-none">{{ group.description | translate }}</p>
              </div>

              <!-- Display Chevron Icon if group has more than 3 pages -->
              @if (group.pages.length >= 3) {
                <fa-icon [icon]="faChevronRight" [@rotateChevron]="expandedGroups[group.category] ? 'down' : 'right'"
                         class="text-gray-500"></fa-icon>
              }
            </div>
          </div>

          <div class="mt-2 space-y-1" [@expandCollapse]="expandedGroups[group.category] ? 'expanded' : 'collapsed'">
            <div class="space-y-1">

              <!-- Show only 3 pages if group is not expanded & be able to expand it -->
              @for (page of group.pages; track $index) {
                <a [routerLink]="page.redirect_url"
                   class="flex items-center p-2 !text-slate-400 hover:bg-gray-500 rounded-lg transition-none hover:!text-white">
                  <div class="w-6 flex-shrink-0">
                    <fa-icon [icon]="page.icon"></fa-icon>
                  </div>
                  <span class="ml-3 text-[0.9rem]">{{ page.title | translate }}</span>
                </a>
              }
            </div>
          </div>
        </div>
      }
    </nav>

  </aside>
</div>
